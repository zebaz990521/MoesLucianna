â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘     ğŸ“Š MODELO EER - SISTEMA POS LICORERA "MOES LUCIANNA" v1.0           â•‘
â•‘                                                                           â•‘
â•‘                    âœ… COMPLETAMENTE GENERADO Y GUARDADO                â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ ARCHIVOS GENERADOS EN: /database/

1. ER_Model_MoesLucianna.sql (35 KB)
   â””â”€ Script SQL completo con todas las tablas
   â””â”€ Abre en: PHPMyAdmin, MySQL CLI, DBeaver, TablePlus, etc.

2. ER_Model_Documentation.md (17 KB)
   â””â”€ DocumentaciÃ³n completa con diagramas ASCII
   â””â”€ Describe cada tabla y sus relaciones

3. moes_lucianna_eer.mwb.xml (38 KB)
   â””â”€ Archivo nativo para MySQL Workbench
   â””â”€ Abre en: MySQL Workbench â†’ File â†’ Open Model

4. README_EER_Model.md (9.2 KB)
   â””â”€ GuÃ­a rÃ¡pida de uso e instrucciones

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ TABLAS CREADAS: 51 TABLAS

Grupo 1: SEGURIDAD (2)
  â”œâ”€ roles
  â””â”€ users

Grupo 2: CATÃLOGOS (4)
  â”œâ”€ categories
  â”œâ”€ suppliers
  â”œâ”€ customers
  â””â”€ document_types

Grupo 3: PRODUCTOS (4)
  â”œâ”€ products (â­ has_expiration=TRUE|FALSE)
  â”œâ”€ product_images
  â”œâ”€ containers
  â””â”€ product_containers

Grupo 4: VENCIMIENTO â­ CRÃTICO (2)
  â”œâ”€ product_batches (batch_number, expiration_date)
  â””â”€ batch_expiration_alerts (7_days, 3_days, expired)

Grupo 5: COMPRAS (2)
  â”œâ”€ purchases
  â””â”€ purchase_details

Grupo 6: VENTAS â­ CRÃTICO (5)
  â”œâ”€ sales (sale_number, is_credit, refund_requested)
  â”œâ”€ sale_details (batch_id para trazabilidad)
  â”œâ”€ sale_payments â­ PAGOS MIXTOS (payment_method + amount)
  â”œâ”€ sale_refunds (reason: no_lo_que_pidio, defectuoso, error)
  â””â”€ refund_payments (same payment_method)

Grupo 7: CRÃ‰DITOS (2)
  â”œâ”€ customer_credits (credit_limit, current_debt)
  â””â”€ credit_payments (customer_id, sale_id, amount)

Grupo 8: CAJA (4)
  â”œâ”€ cash_registers (Caja 1, Caja Principal, etc)
  â”œâ”€ cash_shifts (opening_balance, actual_balance, difference)
  â”œâ”€ cash_movements (sale, expense, withdrawal, deposit)
  â””â”€ container_movements (out/return con deposit_amount)

Grupo 9: DESCUENTOS (2)
  â”œâ”€ discounts (percentage | fixed_amount)
  â””â”€ discount_products

Grupo 10: GASTOS (1)
  â””â”€ expenses (operational, salary, taxes, maintenance, other)

Grupo 11: INVENTARIO Y TRANSACCIONES (2)
  â”œâ”€ inventories (purchase, sale, adjustment)
  â””â”€ transactions (purchase, sale, payment, refund, adjustment)

Grupo 12: REPORTES (1)
  â””â”€ daily_summaries (resumen automÃ¡tico diario)

Grupo 13: SISTEMA (3)
  â”œâ”€ cache
  â”œâ”€ jobs
  â””â”€ sessions

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ CÃ“MO USAR (3 OPCIONES)

OPCIÃ“N 1: MySQL Workbench (RECOMENDADO - Ver diagrama visual)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Abre MySQL Workbench
2. MenÃº: File â†’ Open Model...
3. Selecciona: moes_lucianna_eer.mwb.xml
4. Â¡VerÃ¡s el diagrama completo de todas las relaciones!

OPCIÃ“N 2: Ejecutar SQL directo (Crear BD rÃ¡pidamente)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Abre tu cliente MySQL favorito (PHPMyAdmin, CLI, DBeaver, etc)
2. Crea la base de datos:
   CREATE DATABASE moes_lucianna DEFAULT CHARSET utf8mb4 COLLATE utf8mb4_unicode_ci;

3. Importa el script SQL:
   - VÃ­a CLI: mysql -u root -p moes_lucianna < ER_Model_MoesLucianna.sql
   - O copiar/pegar el contenido en tu cliente MySQL

4. Â¡Listo! Todas las 51 tablas se crearÃ¡n automÃ¡ticamente

OPCIÃ“N 3: Laravel Migrations
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Este archivo SQL se puede convertir a migraciones Laravel
2. Comando: php artisan make:migration create_all_moes_lucianna_tables

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â­ CARACTERÃSTICAS CRÃTICAS IMPLEMENTADAS

1. PAGOS MIXTOS ğŸ’°
   Tabla: sale_payments
   Permite: 50% transfer + 50% cash en UNA venta
   Ejemplo:
     - INSERT sale_payments (sale_id, payment_method='transfer', amount=50)
     - INSERT sale_payments (sale_id, payment_method='cash', amount=50)

2. CONTROL DE VENCIMIENTO ğŸ“…
   Tablas: product_batches + batch_expiration_alerts
   Incluye: batch_number, expiration_date, manufacturing_date
   Alertas: AutomÃ¡ticas a 7 dÃ­as, 3 dÃ­as, y cuando vence

3. DEVOLUCIONES/REEMBOLSOS ğŸ”„
   Tablas: sale_refunds + refund_payments
   Razones: no_lo_que_pidio, defectuoso, error, cambio_idea
   Reembolso: Mismo mÃ©todo de pago original

4. ENVASES RETORNABLES ğŸ“¦
   Tablas: containers + product_containers + container_movements
   Movimientos: out (venta) | return (devoluciÃ³n)
   Control: DepÃ³sitos (deposit_amount) por envase

5. CRÃ‰DITOS A CLIENTES ğŸ’³
   Tablas: customer_credits + credit_payments
   Control: LÃ­mite de crÃ©dito, deuda actual, dÃ­as de pago

6. TURNOS DE CAJA ğŸ•
   Tablas: cash_shifts + cash_movements
   Arqueo: Saldo inicial + movimientos = Saldo final + Diferencia

7. DESCUENTOS Y PROMOCIONES ğŸ
   Tablas: discounts + discount_products
   Tipos: Porcentaje (%) o Monto fijo ($)

8. REPORTES DIARIOS ğŸ“Š
   Tabla: daily_summaries
   Incluye: Ventas por mÃ©todo, Devoluciones, Envases, Vencimientos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”‘ RELACIONES PRINCIPALES (Claves ForÃ¡neas)

products â†’ users (creador)
products â†’ categories (categorÃ­a)
products â†’ product_batches (lotes)

sales â†’ customers (cliente)
sales â†’ users (vendedor)
sales â†’ cash_shifts (turno de caja)

sale_details â†’ sales (relaciÃ³n 1:N)
sale_details â†’ products (producto vendido)
sale_details â†’ product_batches (lote especÃ­fico - TRAZABILIDAD)

sale_payments â†’ sales (mÃºltiples formas de pago)

sale_refunds â†’ sales (devoluciÃ³n)
refund_payments â†’ sale_refunds (reembolso por mÃ©todo)

purchase_details â†’ product_batches (lotes de compra)

container_movements â†’ containers (envase)
container_movements â†’ customers (quiÃ©n tiene envase)
container_movements â†’ sales (venta asociada)

cash_movements â†’ cash_shifts (movimiento en turno)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š ÃNDICES PARA PERFORMANCE

BÃºsquedas de ventas:
  - idx_sales_customer_datetime
  - idx_sales_user_datetime
  - idx_sale_details_sale

Alertas de vencimiento (CRÃTICO):
  - idx_product_batches_expiration (expiration_date, status)
  - idx_batch_number

Movimientos de caja:
  - idx_cash_movements_shift
  - idx_cash_shifts_status

Reportes:
  - idx_daily_summaries_date
  - idx_transactions_user_datetime

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… TODO INCLUIDO EN EL MODELO

âœ“ Seguridad de usuarios y roles
âœ“ GestiÃ³n completa de productos
âœ“ Lotes con control de vencimiento
âœ“ Compras desde proveedores
âœ“ Ventas con mÃºltiples mÃ©todos de pago
âœ“ Sistema de devoluciones y reembolsos
âœ“ Envases retornables con depÃ³sitos
âœ“ CrÃ©ditos a clientes
âœ“ Turnos de caja con arqueo
âœ“ Descuentos y promociones
âœ“ Gastos e ingresos
âœ“ Inventario y movimientos
âœ“ Reportes diarios automÃ¡ticos
âœ“ Sesiones y cachÃ© del sistema

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ PRÃ“XIMOS PASOS

1. âœ… Crear las tablas (SQL ejecutado)
2. â†’ Crear Modelos Eloquent (App/Models/)
3. â†’ Crear Repositorios (App/Repositories/)
4. â†’ Crear Controladores (App/Http/Controllers/)
5. â†’ Crear Rutas (routes/api.php)
6. â†’ Crear Vistas Blade
7. â†’ Crear Jobs para alertas automÃ¡ticas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ ARCHIVOS PARA CONSULTAR

Ver documentaciÃ³n visual:  ER_Model_Documentation.md
Ver guÃ­a de uso:          README_EER_Model.md
Diagrama en Workbench:    moes_lucianna_eer.mwb.xml
Ejecutar SQL:             ER_Model_MoesLucianna.sql

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ ESTADO: âœ… COMPLETAMENTE GENERADO Y LISTO PARA USAR

VersiÃ³n: 1.0
Fecha: 2025-10-18
Base de Datos: MySQL 5.7+
Tablas: 51
Relaciones: Todas definidas
Ãndices: Optimizados para queries comunes
Comentarios: En cada tabla explicando su propÃ³sito

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
